(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const p=20,y=14,L=30,d={LEFT:"ArrowLeft",DOWN:"ArrowDown",RIGHT:"ArrowRight"},w=[[[1,1],[1,1]],[[1,1,1,1]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[1,0],[1,0],[1,1]],[[0,1],[0,1],[1,1]]],a=document.querySelector("canvas"),c=a.getContext("2d"),R=document.querySelector("span"),E=document.querySelector("section"),g=new window.Audio("./tetris.mp3");let m=0;a.width=p*y;a.height=p*L;c.scale(p,p);const f=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,0,0]],e={position:{x:5,y:5},shape:[[1,1],[1,1]]};let h=0,x=0;function O(o=0){const i=o-x;x=o,h+=i,h>1e3&&(e.position.y++,h=0,l()&&(e.position.y--,S(),T())),v(),window.requestAnimationFrame(O)}function v(){c.fillStyle="#000",c.fillRect(0,0,a.width,a.height),f.forEach((o,i)=>{o.forEach((n,r)=>{n===1&&(c.fillStyle="yellow",c.fillRect(r,i,1,1))})}),e.shape.forEach((o,i)=>{o.forEach((n,r)=>{n&&(c.fillStyle="red",c.fillRect(r+e.position.x,i+e.position.y,1,1))})}),R.innerText=m}document.addEventListener("keydown",o=>{if(o.key===d.LEFT&&(e.position.x--,l()&&e.position.x++),o.key===d.RIGHT&&(e.position.x++,l()&&e.position.x--),o.key===d.DOWN&&(e.position.y++,l()&&(e.position.y--,S(),T())),o.key==="ArrowUp"){const i=[];for(let r=0;r<e.shape[0].length;r++){const t=[];for(let s=e.shape.length-1;s>=0;s--)t.push(e.shape[s][r]);i.push(t)}const n=e.shape;e.shape=i,l()&&(e.shape=n)}});function l(){return e.shape.find((o,i)=>o.find((n,r)=>{var t;return n===1&&((t=f[i+e.position.y])==null?void 0:t[r+e.position.x])!==0}))}function S(){e.shape.forEach((o,i)=>{o.forEach((n,r)=>{n===1&&(f[i+e.position.y][r+e.position.x]=1)})}),A()}function A(){e.position.x=Math.floor(y/2-2),e.position.y=0,e.shape=w[Math.floor(Math.random()*w.length)],l()&&(window.alert("Game over!! Sorry!"),f.forEach(o=>o.fill(0)),m=0)}function T(){const o=[];f.forEach((i,n)=>{i.every(r=>r===1)&&o.push(n)}),o.forEach(i=>{f.splice(i,1);const n=Array(y).fill(0);f.unshift(n),m+=10})}E.addEventListener("click",()=>{O(),E.remove(),g.volume=.01,g.play()});
